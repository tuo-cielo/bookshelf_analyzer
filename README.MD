# BookShelf Analyzer

## Описание проекта

BookShelf Analyzer - это веб-приложение для анализа заполненности книжных шкафов с использованием искусственных нейронных сетей. Система автоматически определяет количество книг на полках, рассчитывает процент заполнения и предоставляет статистику в удобном виде.

## Основные возможности

- Загрузка изображений книжных шкафов
- Автоматическое обнаружение книг с использованием YOLO
- Определение полок и распределение книг по ним
- Расчет статистики заполнения
- Визуализация результатов с разметкой
- Сохранение истории анализов
- Генерация отчетов в формате PDF, JSON, Exel


### Установка

1. Клонируйте репозиторий

2. Установите зависимости:
```
pip install -r requirements.txt
```

3. Убедитесь, что файл модели YOLO (`yolo.pt`) находится в корневой директории проекта

### Запуск приложения

1. Запустите веб-приложение:
```
python app.py
```

2. Откройте браузер и перейдите по адресу:
```
http://localhost:5000
```

## Использование

1. **Загрузка изображения**
   - На главной странице нажмите кнопку "Выбрать файл"
   - Выберите изображение книжного шкафа
   - Нажмите "Загрузить и проанализировать"

2. **Анализ изображения**
   - Система автоматически определит книги и полки
   - Результаты отобразятся на странице
   - Будут показаны границы полок и обнаруженные книги

3. **Просмотр статистики**
   - Общее количество книг
   - Количество полок
   - Процент заполнения каждой полки
   - Средний процент заполнения
   - Плотность заполнения

4. **История анализов**
   - Все анализы сохраняются в базе данных
   - Доступен просмотр истории
   - Возможность фильтрации по дате

5. **Генерация отчетов**
   - Создание PDF отчетов
   - Экспорт статистики
   - Сохранение результатов


## Алгоритм работы

1. **Предварительная обработка изображения**
   - Загрузка и проверка формата
   - Изменение размера для оптимизации
   - Конвертация цветового пространства

2. **Детекция книг**
   - Использование модели YOLO для обнаружения книг
   - Фильтрация результатов по уверенности
   - Определение границ (bounding boxes)

3. **Определение полок**
   - Кластеризация книг по вертикальным координатам
   - Объединение близко расположенных полок
   - Определение границ каждой полки

4. **Расчет статистики**
   - Подсчет количества книг на каждой полке
   - Расчет процента заполнения
   - Определение плотности размещения

5. **Визуализация результатов**
   - Отрисовка границ полок и книг
   - Добавление текстовых меток
   - Сохранение результата

## Настройка параметров

Параметры анализа можно настроить в файле `config.py`:

- `confidence_threshold` - порог уверенности для детекции (по умолчанию 0.5)
- `min_gap_percentage` - минимальный процент высоты между полками (по умолчанию 10%)
- `max_merge_percentage` - максимальный процент для объединения полок (по умолчанию 8%)
- `processed_folder` - путь для сохранения обработанных изображений


### Запуск веб-интерфейса
```python
python app.py
```

## Ограничения

- Работает лучше всего с четкими фотографиями книжных шкафов
- Рекомендуется использовать изображения с хорошим освещением
- Оптимальный размер изображения: до 1024x1024 пикселей
- Модель лучше всего определяет стандартные книги

